    with st.form("connexion"):
        st.subheader("Connexion Oracle")
        user = st.text_input("ğŸ‘¤ Nom d'utilisateur Oracle :", value="")
        password = st.text_input("ğŸ”‘ Mot de passe :", type="password")
        execute_sql = st.checkbox("ExÃ©cuter la requÃªte SQL avant analyse", value=False)
        submitted = st.form_submit_button("ğŸš€ Lancer le traitement")

    if submitted:
        if not user or not password:
            st.error("Veuillez renseigner vos identifiants Oracle.")
            st.stop()

        if execute_sql:
            with st.spinner("ğŸ§  ExÃ©cution de la requÃªte SQL, veuillez patienter..."):
                tns_alias = "SIP1CCH.WORLD"
                cmd = f'sqlplus {user}/{password}@{tns_alias} @{SQL_PATH}'
                subprocess.run(cmd, shell=True)
            st.success("âœ… RequÃªte SQL terminÃ©e et fichier CSV gÃ©nÃ©rÃ©.")
            st.divider()

        if not os.path.exists(CSV_PATH):
            st.error(f"âŒ Le fichier {CSV_PATH} n'existe pas. Veuillez exÃ©cuter la requÃªte SQL.")
            st.stop()
