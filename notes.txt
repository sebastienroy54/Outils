import smtplib
from email.message import EmailMessage
from pathlib import Path
import os

def send_mail(subject, body, attachments):
    msg = EmailMessage()
    msg["From"] = os.environ["MAIL_FROM"]
    msg["To"] = os.environ["MAIL_TO"]
    msg["Subject"] = subject
    msg.set_content(body)

    for f in attachments:
        data = Path(f).read_bytes()
        msg.add_attachment(data, maintype="application",
                           subtype="octet-stream", filename=Path(f).name)

    with smtplib.SMTP(os.environ["MAIL_HOST"], int(os.environ["MAIL_PORT"])) as s:
        s.send_message(msg)
