import smtplib
from email.message import EmailMessage
from pathlib import Path

def send_mail(mail_from, recipients, subject, body, attachments=None):
    if attachments is None:
        attachments = []

    msg = EmailMessage()
    msg["From"] = mail_from
    msg["To"] = ", ".join(recipients)
    msg["Subject"] = subject
    msg["Reply-To"] = mail_from

    msg.set_content(body)

    for f in attachments:
        p = Path(f)
        msg.add_attachment(
            p.read_bytes(),
            maintype="application",
            subtype="octet-stream",
            filename=p.name
        )

    with smtplib.SMTP("smtp.aphp.fr", 25) as smtp:
        smtp.send_message(msg)
